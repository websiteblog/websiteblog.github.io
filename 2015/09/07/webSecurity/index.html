
<!DOCTYPE html>
<html lang="zh-CN">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="websit blog">
    <title>webSecurity - websit blog</title>
    <meta name="author" content="mengyue">
    
    
    <meta name="description" content="XSS攻击：允许恶意web用户将代码植入到提供给其它用户使用的页面中。比如包括html代码和客户端脚本。
利用XSS漏洞旁路掉访问控制——例如同源策略。—这种类型的漏洞如：钓鱼网站
跨站脚本攻击是新型的“缓冲区溢出攻击“，而javascript是新型的’shellCode’。
在2007年OWASP所统计的所有安全威胁中，跨站脚本攻击占到了22%，高居所有Web威胁之首。
XSS攻击危害包括：1、">
<meta property="og:type" content="blog">
<meta property="og:title" content="webSecurity">
<meta property="og:url" content="http://websiteblog.github.io/2015/09/07/webSecurity/index.html">
<meta property="og:site_name" content="websit blog">
<meta property="og:description" content="XSS攻击：允许恶意web用户将代码植入到提供给其它用户使用的页面中。比如包括html代码和客户端脚本。
利用XSS漏洞旁路掉访问控制——例如同源策略。—这种类型的漏洞如：钓鱼网站
跨站脚本攻击是新型的“缓冲区溢出攻击“，而javascript是新型的’shellCode’。
在2007年OWASP所统计的所有安全威胁中，跨站脚本攻击占到了22%，高居所有Web威胁之首。
XSS攻击危害包括：1、">
<meta property="og:updated_time" content="2015-09-20T05:21:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="webSecurity">
<meta name="twitter:description" content="XSS攻击：允许恶意web用户将代码植入到提供给其它用户使用的页面中。比如包括html代码和客户端脚本。
利用XSS漏洞旁路掉访问控制——例如同源策略。—这种类型的漏洞如：钓鱼网站
跨站脚本攻击是新型的“缓冲区溢出攻击“，而javascript是新型的’shellCode’。
在2007年OWASP所统计的所有安全威胁中，跨站脚本攻击占到了22%，高居所有Web威胁之首。
XSS攻击危害包括：1、">
    
    
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css" type="text/css">
    <!--STYLES END-->
    
</head>

    <body>
        <div id="blog">
            <header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">websit blog</a>
    </h1>
    
</header>
            <nav id="sidebar" data-behavior="4">
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Início</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categorias</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Arquivo</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="/#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">Pesquisar</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">Sobre</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            webSecurity
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Mon Sep 07 2015 06:43:51 GMT+0800">
	
		    07/09/2015
    	
    </time>
    
</div>
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p><strong>XSS攻击：</strong>允许恶意web用户将代码植入到提供给其它用户使用的页面中。比如包括html代码和客户端脚本。</p>
<p>利用XSS漏洞旁路掉访问控制——例如同源策略。—这种类型的漏洞如：钓鱼网站</p>
<p>跨站脚本攻击是新型的“缓冲区溢出攻击“，而javascript是新型的’shellCode’。</p>
<p>在2007年OWASP所统计的所有安全威胁中，跨站脚本攻击占到了22%，高居所有Web威胁之首。</p>
<p>XSS攻击危害包括：<br>1、盗取各类用户帐号，如机器登录帐号、用户网银帐号、各类管理员帐号<br>2、控制企业数据，包括读取、篡改、添加、删除企业敏感数据的能力<br>3、盗窃企业重要的具有商业价值的资料<br>4、非法转账<br>5、强制发送电子邮件<br>6、网站挂马<br>7、控制受害者机器向其它网站发起攻击</p>
<h2 id="攻击利用手法的类型：">攻击利用手法的类型：</h2><p>A、本地利用漏洞:这种漏洞存在于页面中客户端脚本自身。如：</p>
<blockquote>
<p>-A给B发送一个恶意构造了Web的URL，B点击并查看了这个URL。<br>-恶意页面中的JavaScript打开一个具有漏洞的HTML页面并将其安装在Bob电脑上。<br>-具有漏洞的HTML页面包含了在Bob电脑本地域执行的JavaScript。<br>-Alice的恶意脚本可以在Bob的电脑上执行Bob所持有的权限下的命令。</p>
</blockquote>
<p>B、反射式漏洞：与A有些类似，不同的是Web客户端使用Server端脚本生成页面为用户提供数据时，如果未经验证的用户数据被包含在页面中而未经HTML实体编码，客户端代码便能够注入到动态页面中。如：</p>
<blockquote>
<p>-A经常浏览某个网站，此网站为B所拥有。B的站点运行A使用用户名/密码进行登录，并存储敏感信息。<br>-C发现B的站点包含反射性的XSS漏洞。<br>-C编写一个利用漏洞的URL，并将其冒充为来自B的邮件发送给A。<br>-A在登录到B的站点后，浏览C提供的URL。<br>-嵌入到URL中的恶意脚本在A的浏览器中执行，就像它直接来自B的服务器一样。此脚本盗窃敏感信息(授权、信用卡、帐号信息等)。<br>-然后在A完全不知情的情况下将这些信息发送到C的Web站点。</p>
</blockquote>
<p>C、存储式漏洞：骇客将攻击脚本上传到Web服务器上，使得所有访问该页面的用户都面临信息泄漏的可能，其中也包括了Web服务器的管理员。</p>
<blockquote>
<p>-B拥有一个Web站点，该站点允许用户发布信息/浏览已发布的信息。<br>-C注意到B的站点具有类型C的XSS漏洞。<br>-C发布一个热点信息，吸引其它用户纷纷阅读。<br>-B或者是任何的其他人如A浏览该信息，其会话cookies或者其它信息将被C盗走。</p>
</blockquote>
<p><strong>传统防御技术：</strong>采用的模式匹配方法一般会需要对“javascript”这个关键字进行检索，一旦发现提交信息中包含“javascript”，就认定为XSS攻击。</p>
<p>缺陷显而易见：可以通过插入字符或完全编码的方式躲避检测，如javascript中加入多个tab键/空格字符/回车/回车符\r/完全编码。</p>
<p><strong>升级的防御技术：</strong><br>1、对所有用户提交内容进行可靠的输入验证，包括对URL、查询关键字、HTTP头、POST数据等，仅接受指定长度范围内、采用适当格式、采用所预期的字符的内容提交，对其他的一律过滤。<br>2、实现Session标记(session tokens)、CAPTCHA系统或者HTTP引用头检查，以防功能被第三方网站所执行。<br>3、确认接收的的内容被妥善的规范化，仅包含最小的、安全的Tag(没有javascript)，去掉任何对远程内容的引用(尤其是样式表和javascript)，使用HTTP only的cookie。</p>
<p>事件如：新浪微博XSS受攻击事件，2011年6月28日晚。</p>
<p><strong>DDOS攻击：</strong>分布式拒绝服务攻击，Nick Sullivan撰文介绍了攻击者如何利用恶意网站、服务器劫持和中间人攻击发起DDoS攻，并说明了如何使用HTTPS以及即将到来的名为“子资源一致性（Subresource Integrity，简称SRI）”的Web新技术保护网站免受攻击。</p>
<p>现代网站的大部分交互都来自于JavaScript。网站通过直接向HTML中添加JavaScript代码或者通过HTML元素<script src="">从远程位置加载JavaScript实现交互功能。JavaScript可以发出HTTP(S)请求，实现网页内容异步加载，但它也能将浏览器变成攻击者的武器。如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">imgflood</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">  <span class="keyword">var</span> TARGET = <span class="string">'victim-website.com'</span></span><br><span class="line">  <span class="keyword">var</span> URI = <span class="string">'/index.php?'</span></span><br><span class="line">  <span class="keyword">var</span> pic = <span class="keyword">new</span> Image()</span><br><span class="line">  <span class="keyword">var</span> rand = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">1000</span>)</span><br><span class="line">  pic.src = <span class="string">'http://'</span>+TARGET+URI+rand+<span class="string">'=val'</span></span><br><span class="line">&#125;</span><br><span class="line">setInterval(imgflood, <span class="number">10</span>)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>上述脚本每秒钟会在页面上创建10个image标签。该标签指向“victim-website.com”，并带有一个随机查询参数。如果用户访问了包含这段代码的恶意网站，那么他就会在不知情的情况下参与了对“victim-website.com”的DDoS攻击。</p>
</blockquote>
<p>这种攻击之所以有效是因为HTTP中缺少一种机制使网站能够禁止被篡改的脚本运行。为了解决这一问题，W3C已经提议增加一个新特性子资源一致性。该特性允许网站告诉浏览器，只有在其下载的脚本与网站希望运行的脚本一致时才能运行脚本。这是通过密码散列实现的。</p>
<p>密码散列可以唯一标识一个数据块，任何两个文件的密码散列均不相同。属性integrity提供了网站希望运行的脚本文件的密码散列。浏览器在下载脚本后会计算它的散列，然后将得出的值与integrity提供的值进行比较。如果不匹配，则说明目标脚本被篡改，浏览器将不使用它。不过，许多浏览器目前还不支持该特性，Chrome和Firefox正在增加对这一特性的支持。</p>
<h2 id="中间人攻击：">中间人攻击：</h2><p>中间人攻击是攻击者向网站插入恶意JavaScript代码的最新方式。在通过浏览器访问网站时，中间会经过许多节点。如果任意中间节点向网页添加恶意代码，就形成了中间人攻击。</p>
<p>加密技术可以彻底阻断这种代码注入。借助HTTPS，浏览器和Web服务器之间的所有通信都要经过加密和验证，可以防止第三者在传输过程中修改网页。因此，将网站设为HTTPS-only，并保管好证书以及做好证书验证，可以有效防止中间人攻击。</p>
<p><strong>工具：</strong>用Netsparker扫描网站。</p>
<h2 id="引起攻击的几个原因：">引起攻击的几个原因：</h2><p>1.前端和后端的输入验证不够规范统一及完整.</p>
<p>2.对于用户输入的数据完全信任是危险的，没有编码和过滤一些恶意字符。如：<br>网址： /product/productSearch.aspx? ?coid=3&amp;pmid=D710%20(Epic%204G%20Touch)&amp;kw=%22%2Balert(9)%2B%22&amp;IsPromotion=0</p>
<blockquote>
<p>-第三个参数kw因为在URL中显示的是编码后的，参数的实际值是”+alert(9)+”。<br>-productSearch.aspx页面，参数值传过来没有经过hmtl编码。后端C#程序一个类变量searchkw被赋值”+alert(9)+”。<br>-页面前端执行了如下一段js代码<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span>  <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="handlebars"><span class="xml"></span><br><span class="line"></span><br><span class="line">getNews("searchDisplay.aspx?pcid=<span class="tag">&lt;<span class="title">%=currentPcid</span> %&gt;</span>&amp;pmid=<span class="tag">&lt;<span class="title">%=pmid</span> %&gt;</span>&amp;coid=<span class="tag">&lt;<span class="title">%=coid</span> %&gt;</span>&amp;psid=&amp;counter=<span class="tag">&lt;<span class="title">%=currentCount</span> %&gt;</span>&amp;kw=searchkw%&gt;&amp;isPromotion=<span class="tag">&lt;<span class="title">%=isPromotion</span> %&gt;</span>", "searchDiv1");</span><br><span class="line"></span><br><span class="line"></span></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br>这样的话”+alert(9)+”的第一个双引号把前面的代码都截断了，第二个双引号把后面的都截断了。中间就只剩下alert(9),  便会执行alert(9)这句代码。这句代码可以替换成任意有攻击性的javascript代码段，比如获取cookie的值x=document.cookie;然后提交给攻击者。</p>
</blockquote>
<p>3.数据库查询没有使用asp.net中安全的参数化操作。</p>
<h2 id="解决这几个问题,有以下三步需要做：">解决这几个问题,有以下三步需要做：</h2><p>1.对于数字类型的参数值、用户输入的部分前端和后端都需要验证数据类型的正确性.</p>
<p>2.对于字符串类型的参值或者用户输入的部分后端通过使用AntiXssLibrary.dll来编码字符串.</p>
<p>3.所有SQL语句中拼接字符串的全部使用SqlParameter类封装传入SQL的参数.</p>
</script></p>
            
                

            
        </div>
    </div>
    <div class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">ETIQUETADO em</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/security/">security</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/09/07/Router/"  data-tooltip="Router and History">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ANTERIOR</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/09/06/thinking/" data-tooltip="thinking">
                
                    <span class="hide-xs hide-sm text-small icon-mr">PRÓXIMO</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://websiteblog.github.io/2015/09/07/webSecurity/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://websiteblog.github.io/2015/09/07/webSecurity/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://websiteblog.github.io/2015/09/07/webSecurity/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2015 mengyue. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/09/07/Router/"  data-tooltip="Router and History">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ANTERIOR</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/09/06/thinking/" data-tooltip="thinking">
                
                    <span class="hide-xs hide-sm text-small icon-mr">PRÓXIMO</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://websiteblog.github.io/2015/09/07/webSecurity/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://websiteblog.github.io/2015/09/07/webSecurity/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://websiteblog.github.io/2015/09/07/webSecurity/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://websiteblog.github.io/2015/09/07/webSecurity/">
                <i class="fa fa-google-plus"></i><span class="">Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://websiteblog.github.io/2015/09/07/webSecurity/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://websiteblog.github.io/2015/09/07/webSecurity/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        <div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <h4 id="about-card-name">mengyue</h4>
        
            <h5 id="about-card-bio"><p>author.bio</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </h5>
        
        
    </div>
</div>

        <div id="cover" style="background-image:url('http://res.cloudinary.com/tranquilpeak-hexo-theme/image/upload/v1438975482/v1.3.0-cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js" type="text/javascript"></script>
<!--SCRIPTS END-->



</html>
